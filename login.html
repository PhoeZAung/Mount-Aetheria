<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - Mount Aetheria</title>
<link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&display=swap" rel="stylesheet">
<style>
body { background: linear-gradient(to bottom, #111, #222); color: white; font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
.container { background: #333; padding: 40px; border-radius: 12px; width: 100%; max-width: 350px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
h2 { font-family: 'Uncial Antiqua', serif; color: #ffcc66; margin-bottom: 30px; }
input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 6px; border: 1px solid #555; background: #222; color: white; box-sizing: border-box; }
button { width: 100%; padding: 12px; margin-top: 15px; background: #ffcc66; color: #111; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: background 0.2s; }
button:hover { background: #e6b800; }
.secondary-btn { background: #555; color: #fff; margin-top: 10px; }
.secondary-btn:hover { background: #666; }
#message { margin-top: 20px; color: #ff6666; font-size: 14px; min-height: 20px; }
a { color: #aaa; text-decoration: none; font-size: 12px; display: block; margin-top: 15px; }
</style>
</head>
<body>

<div class="container">
  <h2>Mount Aetheria</h2>
  <div id="auth-forms">
    <input type="email" id="email" placeholder="Email Address">
    <input type="password" id="password" placeholder="Password">
    <button id="loginBtn">Login</button>
    <button id="signupBtn" class="secondary-btn">Create Account</button>
    <button id="googleLoginBtn" class="secondary-btn">Login with Google</button>
    <a href="index.html">Back to Home</a>
  </div>
  <div id="message"></div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBpoi5qvqUehnhcyhfB7d0gtelNUICIthw",
    authDomain: "mount-aetheria.firebaseapp.com",
    projectId: "mount-aetheria",
    storageBucket: "mount-aetheria.firebasestorage.app",
    messagingSenderId: "492855693446",
    appId: "1:492855693446:web:f9948569254a7220c38107",
    measurementId: "G-0PF84KDN7L"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const messageDiv = document.getElementById("message");
  const googleProvider = new GoogleAuthProvider();

  onAuthStateChanged(auth, (user) => {
    if (user) {
      messageDiv.style.color = "#4caf50";
      messageDiv.textContent = "Logged in! Redirecting...";
      setTimeout(() => { window.location.href = "index.html"; }, 1000);
    }
  });

  document.getElementById("loginBtn").addEventListener("click", async () => {
    messageDiv.textContent = "Processing...";
    messageDiv.style.color = "#aaa";
    try {
      await signInWithEmailAndPassword(auth, emailInput.value, passwordInput.value);
    } catch (err) {
      messageDiv.style.color = "#ff6666";
      messageDiv.textContent = "Error: " + err.message;
    }
  });

  document.getElementById("signupBtn").addEventListener("click", async () => {
    messageDiv.textContent = "Creating account...";
    messageDiv.style.color = "#aaa";
    try {
      await createUserWithEmailAndPassword(auth, emailInput.value, passwordInput.value);
    } catch (err) {
      messageDiv.style.color = "#ff6666";
      messageDiv.textContent = "Error: " + err.message;
    }
  });

  document.getElementById("googleLoginBtn").addEventListener("click", async () => {
    messageDiv.textContent = "Signing in with Google...";
    messageDiv.style.color = "#aaa";
    try {
      await signInWithPopup(auth, googleProvider);
    } catch (err) {
      messageDiv.style.color = "#ff6666";
      messageDiv.textContent = "Error: " + err.message;
    }
  });
</script>
</body>
</html>